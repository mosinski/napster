<!DOCTYPE html>
<html>
<link rel="Shortcut icon" href="http://napsterug.herokuapp.com/favicon.ico" />
<head>
  <title>Napster - <%= yield(:title) %><% if yield(:title) == '' %>Twoja Biblioteka Piosenek<% end %></title>
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->
  <link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.3.0/bootstrap.min.css">
  <link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Exo:500' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Emblema+One' rel='stylesheet' type='text/css'>
  <script src="https://raw.github.com/mosinski/mosinski.pl/master/x10%20masonry%20transparent_pliki/js/three.js" id="canvas"></script>
  <script src="https://raw.github.com/mosinski/mosinski.pl/master/x10%20masonry%20transparent_pliki/js/Bird.js" id="canvas"></script>
  <script src="https://raw.github.com/mosinski/mosinski.pl/master/x10%20masonry%20transparent_pliki/js/stats.js" id="canvas"></script>
  <script src="https://raw.github.com/mosinski/napster/master/app/assets/javascripts/jquery.pwdstr-1.0.source.js" id="pwdstr"></script>
  <%= stylesheet_link_tag "application" %>
  <%= javascript_include_tag "application" %>
  <%= javascript_include_tag :defaults %>
  <%= csrf_meta_tags %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <img src="http://napsterug.herokuapp.com/logo.png" alt="napsterlogo" align="left">
      <ul class="nav">
        <% if current_user %>
	<li><a href="/fortunes">Strona Główna</a></li>
	<% else %>
        <li><a href="/">Strona Główna</a></li>
	<% end %>
        <li><a href="/about.html">O nas</a></li>
      </ul>
      <ul class="nav pull-right">
	<li><font color="yellow" size="2px"><%= notice %></font></li>
	<% if current_user %>
        <% if (current_user.avatarurl.nil?) or (current_user.avatarurl == '') %>
	<li id="nav_avatar"><%= image_tag avatar_url(current_user),:width => 50, :height => 50 %></li>
        <% else %>
        <li id="nav_avatar"><%= image_tag(current_user.avatarurl, :class => "avatar", :size => "50x50") %></li>
        <% end %>
	<li><font style="color:rgb(153, 153, 153);text-shadow:0pt -1px 0pt rgba(0, 0, 0, 0.25);line-height:37px;font-weight:bold;">
	<%= current_user.username %></font></li>
        <li><%= link_to "Profil", edit_user_path(current_user.id)%></li>
        <li><%= link_to "Wyloguj", :logout%></li>
        <% else %>
        <li><%= render :partial => "user_sessions/logowanie" %></li>
        <li><%= link_to "Rejestracja", new_user_path%></li>
        <% end %>
	</div>
    </div>
  </div>
</div>
<% if current_user %>
<div class="pasek_boczny">
<p>
<strong class="ukryj"><%= image_tag("hide.png") %></strong>
<strong class="pokaz"><%= image_tag("hideMirror.png") %></strong>
</p>
<table class="menu_person" align="center" width="100" cellspacing="2" cellpadding="2" style="height:100px; border:0">
<thead></thead>
<tbody>
<tr><td style="border:0"><%= link_to image_tag("new.png"), new_fortune_path %></td></tr>
<tr style="border:0"><td style="border:0"><%= link_to image_tag("music.png"), fortunes_path %></td></tr>
<tr><td style="border:0"><%= link_to image_tag("users.png"), users_path %></td></tr>
<tr><td style="border:0"><%= link_to image_tag("settings.png"),  edit_user_path(current_user.id) %></td></tr>
</tbody>
</table>
</div>
<% end %>
  <div class="container">
      <div class="content">
        <div class="page-header">
        </div>
        <div class="row">
          <div class="span12">
	<%= yield %>
          </div>
        </div>
        <footer>
        copyright © Napster
        </footer>
      </div>
    </div>

<script type="text/javascript">
$(document).ready(function(){
  $(".checkbox_ptaki").iphoneStyle();
  $(".checkbox_kolka").iphoneStyle();
  $(".checkbox_samochod").iphoneStyle();
  $(".checkbox_szesciany").iphoneStyle();
  $(".checkbox_woda").iphoneStyle();
});
</script>
<script>
$(".notice_link").hover(function () {
$('.notice_link').popover('show');
},
function (){
$('.notice_link').popover('hide');
}
);

setInterval(function() {
	if($('.checkbox_ptaki').is(":checked")){
        $('.checkbox_ptaki').prop('checked', true).iphoneStyle("refresh");
	$('.ptaki_text_field').val('1');
	$('.checkbox_kolka').prop('checked', false).iphoneStyle("refresh");
	$('.kolka_text_field').val('0');
	$('.checkbox_samochod').prop('checked', false).iphoneStyle("refresh");
	$('.samochod_text_field').val('0');
	$('.checkbox_szesciany').prop('checked', false).iphoneStyle("refresh");
	$('.szesciany_text_field').val('0');
	$('.checkbox_woda').prop('checked', false).iphoneStyle("refresh");
	$('.woda_text_field').val('0');
	}
	else{
	$('.checkbox_ptaki').prop('checked', false).iphoneStyle("refresh");
	$('.ptaki_text_field').val('0');
	}
	if($('.checkbox_kolka').is(":checked")){
	$('.checkbox_kolka').prop('checked', true).iphoneStyle("refresh");
	$('.kolka_text_field').val('1');
        $('.checkbox_ptaki').prop('checked', false).iphoneStyle("refresh");
	$('.ptaki_text_field').val('0');
	$('.checkbox_samochod').prop('checked', false).iphoneStyle("refresh");
	$('.samochod_text_field').val('0');
	$('.checkbox_szesciany').prop('checked', false).iphoneStyle("refresh");
	$('.szesciany_text_field').val('0');
	$('.checkbox_woda').prop('checked', false).iphoneStyle("refresh");
	$('.woda_text_field').val('0');
	}
	else{
	$('.checkbox_kolka').prop('checked', false).iphoneStyle("refresh");
	$('.kolka_text_field').val('0');
	}
	if($('.checkbox_samochod').is(":checked")){
	$('.checkbox_samochod').prop('checked', true).iphoneStyle("refresh");
	$('.samochod_text_field').val('1');
	$('.checkbox_ptaki').prop('checked', false).iphoneStyle("refresh");
	$('.ptaki_text_field').val('0');
	$('.checkbox_kolka').prop('checked', false).iphoneStyle("refresh");
	$('.kolka_text_field').val('0');
	$('.checkbox_szesciany').prop('checked', false).iphoneStyle("refresh");
	$('.szesciany_text_field').val('0');
	$('.checkbox_woda').prop('checked', false).iphoneStyle("refresh");
	$('.woda_text_field').val('0');
	}
	else{
	$('.checkbox_samochod').prop('checked', false).iphoneStyle("refresh");
	$('.samochod_text_field').val('0');
	}
	if($('.checkbox_szesciany').is(":checked")){
	$('.checkbox_szesciany').prop('checked', true).iphoneStyle("refresh");
	$('.szesciany_text_field').val('1');
	$('.checkbox_ptaki').prop('checked', false).iphoneStyle("refresh");
	$('.ptaki_text_field').val('0');
	$('.checkbox_kolka').prop('checked', false).iphoneStyle("refresh");
	$('.kolka_text_field').val('0');
	$('.checkbox_samochod').prop('checked', false).iphoneStyle("refresh");
	$('.samochod_text_field').val('0');
	$('.checkbox_woda').prop('checked', false).iphoneStyle("refresh");
	$('.woda_text_field').val('0');
	}
	else{
	$('.checkbox_szesciany').prop('checked', false).iphoneStyle("refresh");
	$('.szesciany_text_field').val('0');
	}
	if($('.checkbox_woda').is(":checked")){
	$('.checkbox_woda').prop('checked', true).iphoneStyle("refresh");
	$('.woda_text_field').val('1');
	$('.checkbox_ptaki').prop('checked', false).iphoneStyle("refresh");
	$('.ptaki_text_field').val('0');
	$('.checkbox_kolka').prop('checked', false).iphoneStyle("refresh");
	$('.kolka_text_field').val('0');
	$('.checkbox_samochod').prop('checked', false).iphoneStyle("refresh");
	$('.samochod_text_field').val('0');
	$('.checkbox_szesciany').prop('checked', false).iphoneStyle("refresh");
	$('.szesciany_text_field').val('0');
	}
	else{
	$('.checkbox_woda').prop('checked', false).iphoneStyle("refresh");
	$('.woda_text_field').val('0');
	}
        return
      }, 1500);

 $('div#activity_show').click(function () {
 $( this ).hide("slow");
 $('#show').css("color","#888888");
 });
 $('#show').click(function () {
 $('div#activity_show').show(500);
 $('#show').css("color","#D8D8D8");
 });
 $('.ukryj').click(function () {
 $('.menu_person').animate({"margin-left": "-=85px"}, "slow");
 $('.ukryj').hide("slow");
 $('.pokaz').show(500);
 });
 $('.pokaz').click(function () {
 $('.menu_person').animate({"margin-left": "+=85px"}, "slow");
 $('.ukryj').show(500);
 $('.pokaz').hide("slow");
 });
 $(document).ready(function () {
  if($('.checkbox_avatar').is(":checked")) {
    $('.avatarfromurl').show(500);
  }
 });
 $('.checkbox_avatar').change(function(){
    if($(this).is(":checked")) {
    $('.avatarfromurl').show(500);
    }
    else {
    $('.avatar_text_field').val('');
    $('.avatarfromurl').hide("slow");
   }
});
</script>
<script>
(function($){ 
     $.fn.extend({  
         pwdstr: function(el) {			
			return this.each(function() {
					
					
					
					$(this).keyup(function(){
						$(el).html("Hasło zostanie złamane w "+ getTime($(this).val()));
					});
					
					function getTime(str){
					
					var chars = 0;
					var rate = 2800000000;
					
					if((/[a-z]/).test(str)) chars +=  26;
					if((/[A-Z]/).test(str)) chars +=  26;
					if((/[0-9]/).test(str)) chars +=  10;
					if((/[^a-zA-Z0-9]/).test(str)) chars +=  32;

					var pos = Math.pow(chars,str.length);
					var s = pos/rate;
					
					var decimalYears = s/(3600*24*365);
					var years = Math.floor(decimalYears);
					
					var decimalMonths =(decimalYears-years)*12;
					var months = Math.floor(decimalMonths);
					
					var decimalDays = (decimalMonths-months)*30;
					var days = Math.floor(decimalDays);
					
					var decimalHours = (decimalDays-days)*24;
					var hours = Math.floor(decimalHours);
					
					var decimalMinutes = (decimalHours-hours)*60;
					var minutes = Math.floor(decimalMinutes);
					
					var decimalSeconds = (decimalMinutes-minutes)*60;
					var seconds = Math.floor(decimalSeconds);
					
					var time = [];
					
					if(years > 0){
						if(years == 1)
							time.push("1 rok, ");
						else
							time.push(years + " lata, ");
					}
					if(months > 0){
						if(months == 1)
							time.push("1 miesiąc, ");
						else
							time.push(months + " miesiący, ");
					}
					if(days > 0){
						if(days == 1)
							time.push("1 dzień, ");
				 		else
							time.push(days + " dni, ");
					}
					if(hours > 0){
						if(hours == 1)
							time.push("1 godzinę, ");
						else
							time.push(hours + " godzin, ");
					}
					if(minutes > 0){
						if(minutes == 1)
							time.push("1 minute, ");
						else
							time.push(minutes + " minuty, ");
					}
					if(seconds > 0){
						if(seconds == 1)
							time.push("1 sekunde, ");
						else
							time.push(seconds + " sekund, ");
					}
					
					if(time.length <= 0)
						time = "mniej niż sekunde, ";
					else if(time.length == 1)
						time = time[0];
					else
						time = time[0] + time[1];

					 return time.substring(0,time.length-2);
					}
					
			 });
        } 
    }); 
})(jQuery);

$("#password").pwdstr("#password_time");
$("#user_password").pwdstr("#password_time");
</script> 
</body>
</html>
